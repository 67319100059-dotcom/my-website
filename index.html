<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‚Äî ‡∏Å‡∏≤‡∏£‡∏ó‡πç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê (AI)</title>
<style>
:root{
  --bg:#FFF8C6; /* light yellow */
  --glass-bg: rgba(255,255,255,0.6);
  --card-radius:16px;
  --soft-shadow: 0 8px 20px rgba(20,20,60,0.08);
  --accent-1: #6EC6FF; /* blue */
  --accent-2: #FFD86E; /* yellow */
  --accent-3: #FF92C2; /* pink */
  --accent-4: #B9F6CA; /* green */
  --text:#243141;
  --muted:#556677aa;
  font-family: "Noto Sans Thai", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  color:var(--text);
}

/* Page layout */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: linear-gradient(180deg,var(--bg) 0%, #FFF9D9 60%);
  min-height:100vh;
  display:flex;
  align-items:flex-start;
  justify-content:center;
  padding:28px;
}

/* cloud decorations */
.cloud{
  position:fixed;
  width:320px;
  height:120px;
  background: radial-gradient(closest-side, #fff 40%, rgba(255,255,255,0.6) 60%);
  border-radius:60px;
  filter: blur(6px);
  opacity:0.9;
  z-index:0;
}
.cloud.c1{left:8%; top:6%;}
.cloud.c2{right:6%; top:12%; transform:scale(0.9);}

/* Main container */
.container{
  width:100%;
  max-width:1100px;
  background:transparent;
  z-index:2;
}

/* Card / Panel */
.header {
  display:flex;
  align-items:center;
  gap:16px;
  padding:18px;
  border-radius:20px;
  background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(255,255,255,0.45));
  backdrop-filter: blur(6px);
  box-shadow: var(--soft-shadow);
  margin-bottom:18px;
}
.logo{
  width:86px;height:86px;border-radius:16px;
  background:linear-gradient(135deg,#fff, #f0f6ff);
  display:flex;align-items:center;justify-content:center;
  font-size:34px;
  box-shadow: 0 6px 14px rgba(100,120,160,0.06);
}
.title-block{flex:1}
.title-block h1{margin:0;font-size:20px}
.title-block p{margin:4px 0 0;color:var(--muted);font-size:13px}

/* Layout: left nav and main content */
.layout{
  display:grid;
  grid-template-columns:270px 1fr;
  gap:18px;
  align-items:start;
}

/* Sidebar */
.sidebar{
  position:relative;
  padding:14px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.65), rgba(255,255,255,0.45));
  box-shadow: var(--soft-shadow);
  min-height:420px;
}
.user-card{
  display:flex;gap:10px;align-items:center;margin-bottom:12px;
}
.avatar{
  width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,#fff,#f6fff7);
  display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 6px 12px rgba(0,0,0,0.04);
}
.user-info small{display:block;color:var(--muted);font-size:12px}
.nav{
  display:flex;flex-direction:column;gap:8px;margin-top:8px;
}
.btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius:14px;
  background:var(--glass-bg);
  border:0;
  cursor:pointer;
  box-shadow: var(--soft-shadow);
  transition: transform .16s ease, box-shadow .16s ease;
  font-weight:600;
  color:var(--text);
  text-align:left;
}
.btn:disabled{opacity:0.45;cursor:not-allowed}
.btn:hover:not(:disabled){ transform:translateY(-6px); box-shadow: 0 14px 30px rgba(20,20,60,0.12); }
.btn.logout{background:linear-gradient(90deg,#FFDDDD,#FFECEC); color:#7a2b2b; margin-top:12px;}

/* Main content */
.main{
  padding:16px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.75), rgba(255,255,255,0.6));
  box-shadow: var(--soft-shadow);
  min-height:420px;
}

/* Sections */
.section{
  display:none;
  gap:12px;
}
.section.active{display:block}

/* Card styles for content tabs */
.card{
  position:relative;
  padding:16px;
  border-radius:14px;
  background: linear-gradient(135deg, rgba(255,255,255,0.82), rgba(255,255,255,0.6));
  box-shadow: 0 8px 18px rgba(10,20,40,0.04);
  margin-bottom:12px;
  overflow:hidden;
}

/* colorful panels for tabs */
.tab-card.p1{background: linear-gradient(135deg,#E0F7FF, #C9EDFF);}
.tab-card.p2{background: linear-gradient(135deg,#FFF4D1,#FFE6B5);}

/* sheen effect on important cards */
.card.important::before{
  content:"";
  position:absolute;
  left:-60%;
  top:0;
  width:60%;
  height:100%;
  background: linear-gradient(120deg, rgba(255,255,255,0.0), rgba(255,255,255,0.6), rgba(255,255,255,0.0));
  transform:skewX(-20deg);
  pointer-events:none;
  filter: blur(12px);
  animation: sheen 10s linear infinite;
  opacity:0.9;
}
@keyframes sheen{
  0%{ left:-60%; }
  100%{ left:160%; }
}

/* question box */
.question{
  padding:12px;border-radius:12px;background:rgba(255,255,255,0.6);
  display:flex;flex-direction:column;gap:8px;
}
.options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.option{
  padding:10px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfbfd);
  border:1px solid rgba(30,40,60,0.04);
  cursor:pointer;
  transition:transform .12s ease, box-shadow .12s ease;
  display:flex;gap:10px;align-items:center;
}
.option:hover{ transform:translateY(-6px); box-shadow: 0 12px 26px rgba(20,20,60,0.06); }
.option input{display:none}
.option.selected{outline:3px solid rgba(110,198,255,0.25)}

/* timer */
.timer{
  display:flex;align-items:center;gap:8px;color:var(--muted);font-weight:700;
}
.progress{
  height:8px;background:rgba(0,0,0,0.06);border-radius:8px;flex:1;overflow:hidden;
}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,#6EC6FF,#4AA3FF);width:100%;transform-origin:left;transition:width .2s linear;}

/* results */
.results{
  display:flex;gap:12px;align-items:center;flex-wrap:wrap;
}
.score-bubble{
  padding:18px;border-radius:14px;background:linear-gradient(135deg,#fff,#f7fffb);min-width:140px;text-align:center;
  box-shadow: var(--soft-shadow);
}

/* quiz nav */
.qnav{display:flex;gap:8px;align-items:center;margin-top:12px}
.small{font-size:13px;color:var(--muted)}

/* game board */
.board{
  display:grid;grid-template-columns:repeat(4,1fr);gap:10px;
}
.card-game{
  padding:12px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfbff);display:flex;align-items:center;justify-content:center;
  font-size:28px;cursor:pointer;box-shadow:0 8px 18px rgba(12,20,40,0.04);
  transition:transform .12s ease, box-shadow .12s ease;
  user-select:none;
}
.card-game:hover{transform:translateY(-6px);box-shadow:0 20px 36px rgba(10,20,40,0.08)}
.card-game.matched{background:linear-gradient(135deg,#E6FFE9,#DFFFE2); cursor:default;}

/* footer actions */
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
.hint{font-size:13px;color:var(--muted)}

/* responsive */
@media (max-width:880px){
  .layout{grid-template-columns:1fr; }
  .sidebar{order:2}
  .main{order:1}
}
</style>
</head>
<body>
  <div class="cloud c1" aria-hidden="true"></div>
  <div class="cloud c2" aria-hidden="true"></div>

  <div class="container" role="main">
    <!-- Header -->
    <div class="header">
      <div class="logo" aria-hidden="true">üìò</div>
      <div class="title-block">
        <h1>‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå ‚Äî ‡∏Å‡∏≤‡∏£‡∏ó‡πç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê (AI)</h1>
        <p>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô: ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ô‡∏µ‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á ‚Ä¢ ‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</p>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div id="greeting" style="text-align:right;font-size:14px;color:var(--muted)"></div>
        <button id="logoutBtn" class="btn logout" title="‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö">üîì ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
    </div>

    <div class="layout">
      <!-- Sidebar -->
      <aside class="sidebar" aria-label="‡πÅ‡∏ñ‡∏ö‡∏ô‡∏≥‡∏ó‡∏≤‡∏á">
        <!-- Login card (if not logged in) -->
        <div id="loginCard" class="card important">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <h3 style="margin:0">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
              <small class="small">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</small>
            </div>
            <div style="font-size:34px">üë©‚Äçüíª</div>
          </div>
          <div style="margin-top:12px;display:flex;gap:8px;flex-direction:column">
            <input id="fullname" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" style="padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.06)" />
            <div style="display:flex;gap:8px">
              <button id="enterBtn" class="btn" style="flex:1">üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
              <button id="guestBtn" class="btn" style="width:120px">üëÄ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
            </div>
          </div>
        </div>

        <!-- User info after login -->
        <div id="userPanel" style="display:none">
          <div class="user-card">
            <div class="avatar" id="avatarEmoji">üßë‚Äçüéì</div>
            <div class="user-info">
              <strong id="userName">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</strong>
              <small id="userLevel">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ô‡∏µ‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á</small>
            </div>
          </div>

          <nav class="nav" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
            <button class="btn" id="navPre" title="‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">üìù ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
            <button class="btn" id="navContent" title="‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤" disabled>üìö ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤</button>
            <button class="btn" id="navPost" title="‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" disabled>‚úÖ ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
            <button class="btn" id="navGame" title="‡πÄ‡∏Å‡∏°‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö" disabled>üéÆ ‡πÄ‡∏Å‡∏°‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö</button>
            <button class="btn" id="navCheck" title="‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô" disabled>üìä ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤</button>
          </nav>
        </div>

        <div style="margin-top:12px;font-size:13px;color:var(--muted)">
          <div>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠: ‡∏Å‡∏≤‡∏£‡∏ó‡πç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê (AI)</div>
          <div style="margin-top:8px">‡∏ß‡∏¥‡∏ä‡∏≤: ‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</div>
        </div>
      </aside>

      <!-- Main content -->
      <main class="main">
        <!-- Pre-test section -->
        <section id="pretestSection" class="section active">
          <div class="card important">
            <h3 style="margin:0 0 6px 0">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤)</h3>
            <small class="small">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö 10 ‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß | ‡πÄ‡∏ß‡∏•‡∏≤ 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠ | ‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠</small>
          </div>

          <div id="pretestContainer" class="card">
            <div id="qbox" class="question">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <strong id="qtitle">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</strong>
                  <div class="small" id="qcount">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1 / 10</div>
                </div>
                <div class="timer">
                  ‚è± <div id="timeLeft">20</div>s
                  <div class="progress" style="width:160px"><i id="prog" style="width:100%"></i></div>
                </div>
              </div>

              <div id="qtext" style="font-size:16px;margin-top:6px">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</div>

              <div class="options" id="options"></div>

              <div class="qnav">
                <div class="small hint">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏ñ‡∏±‡∏î‡πÑ‡∏õ" ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</div>
                <div style="flex:1"></div>
                <button id="nextQ" class="btn" disabled>‚û°Ô∏è ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Content section -->
        <section id="contentSection" class="section">
          <div class="tab-card p1 card important">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <h3 style="margin:0">‡πÅ‡∏ó‡πá‡∏õ‡∏ó‡∏µ‡πà 1 ‚Äî ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h3>
                <small class="small">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</small>
              </div>
              <div style="font-size:34px">ü§ñüìà</div>
            </div>
          </div>

          <div class="card">
            <h4>‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</h4>
            <p>
              ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê (AI) ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏°‡∏≤‡∏Å ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß
              ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Demand Forecasting) ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </p>
            <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">üîç</div>
                <strong>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</strong>
                <div class="small">AI ‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏Å‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà</div>
              </div>
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">ü§ñ</div>
                <strong>‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</strong>
                <div class="small">‡∏•‡∏î‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
              </div>
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">üí°</div>
                <strong>‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô</strong>
                <div class="small">‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå</div>
              </div>
            </div>
          </div>

          <div class="tab-card p2 card important">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div>
                <h3 style="margin:0">‡πÅ‡∏ó‡πá‡∏õ‡∏ó‡∏µ‡πà 2 ‚Äî ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê</h3>
                <small class="small">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏≥ AI ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</small>
              </div>
              <div style="font-size:34px">üíºüß†</div>
            </div>
          </div>

          <div class="card">
            <h4>‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê</h4>
            <p>
              ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ AI ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÉ‡∏ô‡∏™‡πÄ‡∏Å‡∏•‡πÄ‡∏•‡πá‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ú‡∏•
              ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Recommendation), ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏†‡∏≤‡∏©‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ (NLP) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó, ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏â‡πâ‡∏≠‡πÇ‡∏Å‡∏á
            </p>
            <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">üßæ</div>
                <strong>‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏≥‡∏û‡∏π‡∏î/‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</strong>
                <div class="small">NLP ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
              </div>
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">üì¶</div>
                <strong>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</strong>
                <div class="small">‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å</div>
              </div>
              <div class="card" style="flex:1;min-width:220px">
                <div style="font-size:32px">üîê</div>
                <strong>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</strong>
                <div class="small">‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏â‡πâ‡∏≠‡πÇ‡∏Å‡∏á</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Post-test -->
        <section id="posttestSection" class="section">
          <div class="card important">
            <h3 style="margin:0">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏öÔøΩÔøΩ‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</h3>
            <small class="small">‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö 10 ‡∏Ç‡πâ‡∏≠ (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏•‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö) | ‡πÄ‡∏ß‡∏•‡∏≤ 20 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠</small>
          </div>

          <div id="posttestContainer" class="card">
            <div id="qbox2" class="question">
              <div style="display:flex;justify-content:space-between;align-items:center">
                <div>
                  <strong id="qtitle2">‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</strong>
                  <div class="small" id="qcount2">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1 / 10</div>
                </div>
                <div class="timer">
                  ‚è± <div id="timeLeft2">20</div>s
                  <div class="progress" style="width:160px"><i id="prog2" style="width:100%"></i></div>
                </div>
              </div>

              <div id="qtext2" style="font-size:16px;margin-top:6px">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏£‡πâ‡∏≠‡∏°</div>

              <div class="options" id="options2"></div>

              <div class="qnav">
                <div class="small hint">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î "‡∏ñ‡∏±‡∏î‡πÑ‡∏õ" ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤</div>
                <div style="flex:1"></div>
                <button id="nextQ2" class="btn" disabled>‚û°Ô∏è ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Game -->
        <section id="gameSection" class="section">
          <div class="card important">
            <h3 style="margin:0">‡πÄ‡∏Å‡∏°‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö ‚Äî ‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà (Memory)</h3>
            <small class="small">‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏Å‡∏±‡∏ö‡∏≠‡∏µ‡πÇ‡∏°‡∏à‡∏¥‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö AI</small>
          </div>

          <div class="card">
            <div id="board" class="board" aria-live="polite"></div>
            <div class="actions">
              <button id="newGame" class="btn">üîÅ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</button>
              <div class="hint">‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ: ‡∏à‡∏î‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
            </div>
            <div style="margin-top:12px" class="small">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (session): <strong id="bestGame">0</strong></div>
          </div>
        </section>

        <!-- Check / Results -->
        <section id="checkSection" class="section">
          <div class="card important">
            <h3 style="margin:0">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤</h3>
            <small class="small">‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</small>
          </div>

          <div class="card results">
            <div class="score-bubble">
              <div class="small">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
              <div style="font-size:24px" id="preScore">- / 10</div>
            </div>
            <div class="score-bubble">
              <div class="small">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
              <div style="font-size:24px" id="postScore">- / 10</div>
            </div>
            <div class="score-bubble">
              <div class="small">‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£</div>
              <div style="font-size:20px" id="deltaScore">-</div>
            </div>
          </div>

          <div class="card" id="qualityCard">
            <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</h4>
            <p id="qualityText">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
          </div>
        </section>

      </main>
    </div>
  </div>

<script>
/* Data and state */
const APP = {
  level: "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ô‡∏µ‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏ä‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á",
  subject: "‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à",
  lesson: "‡∏Å‡∏≤‡∏£‡∏ó‡πç‡∏≤‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê (AI)",
  tab1: "‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡∏Å‡∏±‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à",
  tab2: "‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏õ‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê",
  userKey: "ai_lesson_user",
  preKey: "ai_lesson_pre",
  postKey: "ai_lesson_post",
  bestGameKey: "ai_lesson_bestgame",
};

/* Example 10 pre/post questions about the topic */
const QUESTIONS = [
  {
    q: "AI (‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê) ‡∏°‡∏µ‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÉ‡∏î‡∏ï‡πà‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
    choices: ["‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á", "‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à", "‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏û‡∏á‡∏Ç‡∏∂‡πâ‡∏ô", "‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"],
    ans: 1
  },
  {
    q: "‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?",
    choices: ["‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Recommendation)", "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏µ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "‡∏ã‡πà‡∏≠‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏±‡∏Å‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô", "‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"],
    ans: 0
  },
  {
    q: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£?",
    choices: ["‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô", "‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à", "‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥", "‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"],
    ans: 2
  },
  {
    q: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (data) ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ï‡πà‡∏≠ AI ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
    choices: ["‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô", "‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏•", "‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢", "‡πÉ‡∏ä‡πâ‡πÅ‡∏ó‡∏ô‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"],
    ans: 1
  },
  {
    q: "NLP (‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏†‡∏≤‡∏©‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥) ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?",
    choices: ["‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", "‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢‡πÑ‡∏õ", "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πâ‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£", "‡∏õ‡∏¥‡∏î‡∏Å‡∏±‡πâ‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"],
    ans: 0
  },
  {
    q: "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ AI ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏≠‡∏∞‡πÑ‡∏£?",
    choices: ["‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏Å‡πà‡∏≠‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏î‡∏π‡∏õ‡∏±‡∏ç‡∏´‡∏≤", "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°", "‡∏ã‡∏∑‡πâ‡∏≠‡∏Æ‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ß‡∏£‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô", "‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏•‡∏¢"],
    ans: 1
  },
  {
    q: "‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏ö‡∏≠‡∏ó‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏≠‡∏∞‡πÑ‡∏£?",
    choices: ["‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏ô‡∏ó‡∏ô‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡πÇ‡∏°‡πÄ‡∏î‡∏• NLP", "‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö", "‡πÅ‡∏Ñ‡πà‡πÉ‡∏™‡πà emoji ‡∏°‡∏≤‡∏Å‡πÜ", "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"],
    ans: 0
  },
  {
    q: "AI ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
    choices: ["‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô", "‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£", "‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà"],
    ans: 1
  },
  {
    q: "‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ AI ‡∏Ñ‡∏ß‡∏£‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?",
    choices: ["‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÇ‡∏°‡πÄ‡∏î‡∏•, ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á", "‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ü‡∏ã", "‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î", "‡πÅ‡∏Ñ‡πà‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå"],
    ans: 0
  },
  {
    q: "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡πÉ‡∏î?",
    choices: ["‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå", "‡∏•‡∏∞‡πÄ‡∏•‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", "‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•", "‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏™‡∏°‡∏≠"],
    ans: 2
  },
];

/* Shuffle helper */
function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

/* UI elements */
const loginCard = document.getElementById('loginCard');
const userPanel = document.getElementById('userPanel');
const fullnameInput = document.getElementById('fullname');
const enterBtn = document.getElementById('enterBtn');
const guestBtn = document.getElementById('guestBtn');
const greeting = document.getElementById('greeting');
const avatarEmoji = document.getElementById('avatarEmoji');
const userNameEl = document.getElementById('userName');

const navPre = document.getElementById('navPre');
const navContent = document.getElementById('navContent');
const navPost = document.getElementById('navPost');
const navGame = document.getElementById('navGame');
const navCheck = document.getElementById('navCheck');

const sections = {
  pre: document.getElementById('pretestSection'),
  content: document.getElementById('contentSection'),
  post: document.getElementById('posttestSection'),
  game: document.getElementById('gameSection'),
  check: document.getElementById('checkSection')
};

const logoutBtn = document.getElementById('logoutBtn');

/* State for quizzes */
let preState = { idx:0, answers: [], timer:null, timeLeft:20, scoring:0 };
let postState = { idx:0, answers: [], timer:null, timeLeft:20, scoring:0 };

/* Pre-render questions with fixed order; posttest will shuffle options */
const preQuestions = QUESTIONS.map(q => ({...q}));
const postQuestionsBase = QUESTIONS.map(q => ({...q}));

/* Elements pretest */
const qtitle = document.getElementById('qtitle');
const qcount = document.getElementById('qcount');
const qtext = document.getElementById('qtext');
const options = document.getElementById('options');
const timeLeftEl = document.getElementById('timeLeft');
const prog = document.getElementById('prog');
const nextQ = document.getElementById('nextQ');

/* Elements posttest */
const qtitle2 = document.getElementById('qtitle2');
const qcount2 = document.getElementById('qcount2');
const qtext2 = document.getElementById('qtext2');
const options2 = document.getElementById('options2');
const timeLeftEl2 = document.getElementById('timeLeft2');
const prog2 = document.getElementById('prog2');
const nextQ2 = document.getElementById('nextQ2');

/* Check results elements */
const preScoreEl = document.getElementById('preScore');
const postScoreEl = document.getElementById('postScore');
const deltaScoreEl = document.getElementById('deltaScore');
const qualityText = document.getElementById('qualityText');

/* Game elements */
const board = document.getElementById('board');
const newGame = document.getElementById('newGame');
const bestGameEl = document.getElementById('bestGame');

/* Utilities: localStorage */
function saveUser(name){
  localStorage.setItem(APP.userKey, JSON.stringify({name, ts:Date.now()}));
}
function loadUser(){
  const raw = localStorage.getItem(APP.userKey);
  if(!raw) return null;
  try{ return JSON.parse(raw); } catch(e){ return null; }
}
function savePreScore(n){
  localStorage.setItem(APP.preKey, String(n));
}
function savePostScore(n){
  localStorage.setItem(APP.postKey, String(n));
}
function loadPreScore(){ return Number(localStorage.getItem(APP.preKey) || -1); }
function loadPostScore(){ return Number(localStorage.getItem(APP.postKey) || -1); }
function clearAll(){
  localStorage.removeItem(APP.userKey);
  localStorage.removeItem(APP.preKey);
  localStorage.removeItem(APP.postKey);
  localStorage.removeItem(APP.bestGameKey);
}

/* Login logic */
function showLoggedIn(name){
  loginCard.style.display='none';
  userPanel.style.display='block';
  userNameEl.textContent = name;
  greeting.textContent = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ${name}`;
  // avatar from initial
  const initials = name.trim().split(/\s+/).map(s=>s[0]).slice(0,2).join('');
  avatarEmoji.textContent = 'üßë‚Äçüéì';
  // Show nav pretest only initially
  navPre.disabled = false;
  navContent.disabled = true;
  navPost.disabled = true;
  navGame.disabled = true;
  navCheck.disabled = true;
  // open pretest
  showSection('pre');
}

function showSection(key){
  Object.values(sections).forEach(s => s.classList.remove('active'));
  if(sections[key]) sections[key].classList.add('active');
}

/* Initialize pretest */
function renderPreQuestion(){
  const i = preState.idx;
  const q = preQuestions[i];
  qtitle.textContent = `‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°`;
  qcount.textContent = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${i+1} / ${preQuestions.length}`;
  qtext.textContent = q.q;
  // render options in fixed order
  options.innerHTML = '';
  q.choices.forEach((c,ci)=>{
    const div = document.createElement('label');
    div.className = 'option';
    div.innerHTML = `<input type="radio" name="opt" value="${ci}"><span>${c}</span>`;
    div.addEventListener('click', ()=>{
      Array.from(options.querySelectorAll('.option')).forEach(o=>o.classList.remove('selected'));
      div.classList.add('selected');
      nextQ.disabled = false;
      // store temporarily
      preState.selected = ci;
    });
    options.appendChild(div);
  });
  nextQ.disabled = true;
  preState.timeLeft = 20;
  updateTimerDisplay(preState.timeLeft,prog);
  if(preState.timer) clearInterval(preState.timer);
  preState.timer = setInterval(() => {
    preState.timeLeft--;
    updateTimerDisplay(preState.timeLeft,prog);
    if(preState.timeLeft<=0){
      clearInterval(preState.timer);
      // mark as no answer (null) and move next
      preState.answers.push(null);
      advancePreQuestion();
    }
  },1000);
}

function updateTimerDisplay(t, progEl){
  const pct = Math.max(0, (t/20)*100);
  if(progEl) progEl.style.width = pct + '%';
  if(progEl===prog) timeLeftEl.textContent = t;
  if(progEl===prog2) timeLeftEl2.textContent = t;
}

/* Advance pretest */
function advancePreQuestion(){
  if(preState.timer) { clearInterval(preState.timer); preState.timer=null; }
  // save selected or null
  if(typeof preState.selected !== 'undefined'){
    preState.answers.push(Number(preState.selected));
    preState.selected = undefined;
  }
  preState.idx++;
  if(preState.idx < preQuestions.length){
    renderPreQuestion();
  } else {
    finishPretest();
  }
}

/* Finish pretest */
function finishPretest(){
  // score
  let score=0;
  for(let i=0;i<preQuestions.length;i++){
    if(preState.answers[i] === preQuestions[i].ans) score++;
  }
  preState.scoring = score;
  savePreScore(score);
  alert(`‡∏à‡∏ö‡∏ö‡∏ó‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score} / ${preQuestions.length}`);
  // unlock other sections
  navContent.disabled = false;
  navPost.disabled = false;
  navGame.disabled = false;
  navCheck.disabled = false;
  // show check page update
  updateCheckResults();
  // switch to content automatically
  showSection('content');
}

/* Posttest rendering with shuffled choices per question */
let postQuestions = [];
function preparePostQuestions(){
  postQuestions = postQuestionsBase.map(q=>{
    // create choice objects and record correct value index after shuffle
    const choices = q.choices.map((c,idx)=>({text:c,orig:idx}));
    const shuffled = shuffle(choices);
    const newAns = shuffled.findIndex(s=>s.orig===q.ans);
    return { q: q.q, choices: shuffled.map(s=>s.text), ans: newAns };
  });
}

/* Render post question */
function renderPostQuestion(){
  const i = postState.idx;
  const q = postQuestions[i];
  qtitle2.textContent = `‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°`;
  qcount2.textContent = `‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${i+1} / ${postQuestions.length}`;
  qtext2.textContent = q.q;
  options2.innerHTML = '';
  q.choices.forEach((c,ci)=>{
    const div = document.createElement('label');
    div.className = 'option';
    div.innerHTML = `<input type="radio" name="opt2" value="${ci}"><span>${c}</span>`;
    div.addEventListener('click', ()=>{
      Array.from(options2.querySelectorAll('.option')).forEach(o=>o.classList.remove('selected'));
      div.classList.add('selected');
      nextQ2.disabled = false;
      postState.selected = ci;
    });
    options2.appendChild(div);
  });
  nextQ2.disabled = true;
  postState.timeLeft = 20;
  updateTimerDisplay(postState.timeLeft,prog2);
  if(postState.timer) clearInterval(postState.timer);
  postState.timer = setInterval(()=>{
    postState.timeLeft--;
    updateTimerDisplay(postState.timeLeft,prog2);
    if(postState.timeLeft<=0){
      clearInterval(postState.timer);
      postState.answers.push(null);
      advancePostQuestion();
    }
  },1000);
}

function advancePostQuestion(){
  if(postState.timer){ clearInterval(postState.timer); postState.timer=null; }
  if(typeof postState.selected !== 'undefined'){
    postState.answers.push(Number(postState.selected));
    postState.selected = undefined;
  }
  postState.idx++;
  if(postState.idx < postQuestions.length){
    renderPostQuestion();
  } else {
    finishPosttest();
  }
}

function finishPosttest(){
  // score
  let score=0;
  for(let i=0;i<postQuestions.length;i++){
    if(postState.answers[i] === postQuestions[i].ans) score++;
  }
  postState.scoring = score;
  savePostScore(score);
  alert(`‡∏à‡∏ö‡∏ö‡∏ó‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${score} / ${postQuestions.length}`);
  updateCheckResults();
  showSection('check');
}

/* Update check page */
function updateCheckResults(){
  const pre = loadPreScore();
  const post = loadPostScore();
  preScoreEl.textContent = (pre>=0? `${pre} / 10` : '- / 10');
  postScoreEl.textContent = (post>=0? `${post} / 10` : '- / 10');
  if(pre>=0 && post>=0){
    const delta = post - pre;
    deltaScoreEl.textContent = (delta>=0? `+${delta}` : `${delta}`);
    // quality based on post score
    let quality = '', color='';
    if(post >= 8){ quality = '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° ‚Äî ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏î‡∏µ‡∏°‡∏≤‡∏Å'; color='#2b8a3e'; }
    else if(post >=6){ quality = '‡∏î‡∏µ ‚Äî ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ó‡∏µ‡πà‡∏î‡∏µ'; color='#2b8a3e'; }
    else if(post >=4){ quality = '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á ‚Äî ‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ù‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°'; color='#b07f00'; }
    else { quality = '‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á ‚Äî ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤'; color='#a12b2b'; }
    qualityText.innerHTML = `<strong style="color:${color}">${quality}</strong><div style="margin-top:6px">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡πà‡∏≠‡∏ô: ${pre} | ‡∏´‡∏•‡∏±‡∏á: ${post}</div>`;
  } else {
    deltaScoreEl.textContent = '-';
    qualityText.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô';
  }
}

/* Game: memory matching using pairs of term & emoji */
const gamePairs = [
  {id:'model', text:'Model', emoji:'üß†'},
  {id:'data', text:'Data', emoji:'üìä'},
  {id:'bot', text:'Chatbot', emoji:'üí¨'},
  {id:'rec', text:'Recommendation', emoji:'‚≠ê'},
  {id:'auto', text:'Automation', emoji:'‚öôÔ∏è'},
  {id:'secure', text:'Security', emoji:'üîê'},
  {id:'forecast', text:'Forecast', emoji:'üîÆ'},
  {id:'nlp', text:'NLP', emoji:'üìù'},
];

let gameState = {cards:[], first:null, second:null, blocked:false, matched:0, score:0};

function buildGameCards(){
  const base = [];
  gamePairs.forEach(p=>{
    base.push({key:p.id, content:p.emoji, type:'emoji'});
    base.push({key:p.id, content:p.text, type:'text'});
  });
  return shuffle(base);
}

function renderBoard(){
  board.innerHTML = '';
  gameState.cards.forEach((c,idx)=>{
    const el = document.createElement('div');
    el.className = 'card-game';
    el.dataset.idx = idx;
    el.setAttribute('role','button');
    el.setAttribute('tabindex','0');
    el.innerHTML = `<div class="face">${c.revealed || c.matched ? c.content : '‚ùì'}</div>`;
    if(c.matched) el.classList.add('matched');
    el.addEventListener('click', ()=>onCardClick(idx));
    el.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') onCardClick(idx); });
    board.appendChild(el);
  });
}

function startNewGame(){
  gameState.cards = buildGameCards().map(c=>({...c, matched:false, revealed:false}));
  gameState.first = null; gameState.second = null; gameState.blocked=false; gameState.matched=0; gameState.score=0;
  renderBoard();
}

function onCardClick(idx){
  if(gameState.blocked) return;
  const card = gameState.cards[idx];
  if(card.matched || card.revealed) return;
  // reveal
  card.revealed = true;
  renderBoard();
  if(!gameState.first){
    gameState.first = {idx, card};
  } else if(!gameState.second && idx !== gameState.first.idx){
    gameState.second = {idx, card};
    // check match
    if(gameState.first.card.key === gameState.second.card.key){
      // match
      gameState.cards[gameState.first.idx].matched = true;
      gameState.cards[gameState.second.idx].matched = true;
      gameState.matched += 1;
      gameState.score += 10;
      gameState.first = null; gameState.second = null;
      renderBoard();
      if(gameState.matched === gamePairs.length){
        // game over
        const best = Number(localStorage.getItem(APP.bestGameKey) || 0);
        if(gameState.score > best){
          localStorage.setItem(APP.bestGameKey, String(gameState.score));
          bestGameEl.textContent = String(gameState.score);
        }
        setTimeout(()=>{ alert(`‡∏ä‡∏ô‡∏∞! ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${gameState.score}`); },400);
      }
    } else {
      // not match: hide after short delay
      gameState.blocked = true;
      setTimeout(()=>{
        gameState.cards[gameState.first.idx].revealed = false;
        gameState.cards[gameState.second.idx].revealed = false;
        gameState.first = null; gameState.second = null; gameState.blocked=false;
        renderBoard();
      },800);
    }
  }
}

/* Event bindings */
enterBtn.addEventListener('click', ()=>{
  const name = fullnameInput.value.trim();
  if(!name){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‚Äì‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•'); return; }
  saveUser(name);
  showLoggedIn(name);
});
guestBtn.addEventListener('click', ()=>{
  const name = '‡∏ú‡∏π‡πâ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°';
  saveUser(name);
  showLoggedIn(name);
});

logoutBtn.addEventListener('click', ()=>{
  if(!confirm('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) return;
  clearAll();
  location.reload();
});

/* Nav clicks */
navPre.addEventListener('click', ()=> showSection('pre'));
navContent.addEventListener('click', ()=> showSection('content'));
navPost.addEventListener('click', ()=> {
  preparePostQuestions();
  postState = { idx:0, answers: [], timer:null, timeLeft:20, scoring:0 };
  renderPostQuestion();
  showSection('post');
});
navGame.addEventListener('click', ()=> showSection('game'));
navCheck.addEventListener('click', ()=> { updateCheckResults(); showSection('check'); });

/* Pretest next */
nextQ.addEventListener('click', ()=>{
  // if selected, push and advance
  if(typeof preState.selected !== 'undefined'){
    advancePreQuestion();
  }
});

/* Posttest next */
nextQ2.addEventListener('click', ()=>{
  if(typeof postState.selected !== 'undefined'){
    advancePostQuestion();
  }
});

/* Initialize app state on load */
function init(){
  const user = loadUser();
  if(user){
    showLoggedIn(user.name || '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô');
  } else {
    loginCard.style.display='block';
    userPanel.style.display='none';
  }
  // prepare pretest
  preState = { idx:0, answers: [], timer:null, timeLeft:20, scoring:0, selected:undefined };
  renderPreQuestion();

  // bind pre answer selection press Enter support
  document.addEventListener('keydown', (e)=> {
    if(e.key === 'Enter'){
      // if in pretest and a selection present and next enabled, click
      if(sections.pre.classList.contains('active') && !nextQ.disabled) nextQ.click();
      if(sections.post.classList.contains('active') && !nextQ2.disabled) nextQ2.click();
    }
  });

  // init game
  const best = Number(localStorage.getItem(APP.bestGameKey) || 0);
  bestGameEl.textContent = String(best);
  startNewGame();
}

/* Game controls */
newGame.addEventListener('click', ()=>{
  startNewGame();
});

/* On page load */
init();

/* Accessibility: disable content nav until pretest finished */
/* The unlocking occurs after finishPretest called earlier */

/* Small helper: ensure sheen does not overlap buttons visually - it's on cards only */
</script>
</body>
</html>